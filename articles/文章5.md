<p>好久没有写过文章了，今天终于能抽出时间说说我最近在做的事</p>
<p>上个礼拜面试通过，终于有地方去暑期实习了！</p>
<p>由于实习公司采用的是<em>Vue</em>技术栈,所以这段时间在学习,并且上个礼拜交掉了<em>Python</em>课程的期中作业，总算能把之前的两个坑——Python爬虫与z-index补上了</p>
<h4>开发一个抓取豆瓣Top250电影的博客并且进行数据可视化(完结)</h4>
<p>不多说，上代码</p>
<p>首先是防反爬,这里使用的xici匿名代理。这里不放出完整代码，只放出重点部分，完整部分可以在<a href="https://github.com/moyui/learn_python">点击这里</a>找到</p>
<h5>customProxy/customProxy.py</h5>
<pre>
    def filter(self, address, port, types):\n
        if types == 'HTTP':\n
            return False\n
        elif types == 'HTTPS':\n
            proxy = {'https': 'http://%s:%s' % (address, port)}\n
        else:\n
            return False\n
\n
        try:\n
            if requests.get('https://movie.douban.com/top250', proxies=proxy, timeout=0.5).status_code == 200:\n
                return True\n
            else:\n
                return False\n
        except:\n
            return False\n
</pre>
<p>上面代码主要意思是检测是否为<em>HTTPS</em>代理，是则保留，不是就放弃，然后进行检测，是否能连接上豆瓣电影，这里我将<em>timeout</em>即判断是否超时设置为0.5s,最后自己导出为json格式的文件</p>
<h5>douban/middleware/customProxy.py</h5>
<pre>
# -*- coding: utf-8 -*-/n
import os/n
import json/n
import random/n
/n
class RandomRroxy(object):/n
    path = "./douban/pool.json"/n
    propath = os.path.abspath(path)/n
    with open(propath, 'r', encoding='utf-8') as f:/n
        load_dict = json.load(f)/n
/n
    def process_request(self, request, spider):/n
        proxy = random.choice(self.load_dict)/n
        request.meta['proxy'] = 'https://%s:%s' % (proxy['proxy_address'], proxy/n['proxy_port'])/n
</pre>
<p>没什么好说的，就是导入生成后的线程池</p>
<p>别忘了设置一下超时重启</p>
<h5>douban/settings.py</h5>
<pre>
DOWNLOAD_TIMEOUT = 60
<pre>
<p>最后进行数据可视化，这里使用了<em>echarts</em>,非常简单,所以说就不放出代码了，最后给各位看看效果</p>
<img src="/5-1.png">
<img src="/5-2.png">
<img src="/5-3.png">
<img src="/5-4.png">
<p>就到这里了，明天补一下之前的z-index</p>